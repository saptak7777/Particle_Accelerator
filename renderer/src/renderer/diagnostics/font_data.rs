//! Embedded 8x8 ASCII bitmap font data for overlay rendering
//!
//! This module contains the static font data used by the diagnostics overlay.
//! Characters 32-126 (space to tilde) are supported.

/// 8x8 ASCII bitmap font (characters 32-126)
/// Each character is 8 bytes, one per row, MSB = leftmost pixel
pub static FONT_8X8: [[u8; 8]; 95] = [
    [0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], // 32: space
    [0x18, 0x3C, 0x3C, 0x18, 0x18, 0x00, 0x18, 0x00], // 33: !
    [0x6C, 0x6C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], // 34: "
    [0x6C, 0xFE, 0x6C, 0x6C, 0xFE, 0x6C, 0x00, 0x00], // 35: #
    [0x18, 0x7E, 0xC0, 0x7C, 0x06, 0xFC, 0x18, 0x00], // 36: $
    [0x00, 0xC6, 0xCC, 0x18, 0x30, 0x66, 0xC6, 0x00], // 37: %
    [0x38, 0x6C, 0x38, 0x76, 0xDC, 0xCC, 0x76, 0x00], // 38: &
    [0x18, 0x18, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00], // 39: '
    [0x0C, 0x18, 0x30, 0x30, 0x30, 0x18, 0x0C, 0x00], // 40: (
    [0x30, 0x18, 0x0C, 0x0C, 0x0C, 0x18, 0x30, 0x00], // 41: )
    [0x00, 0x66, 0x3C, 0xFF, 0x3C, 0x66, 0x00, 0x00], // 42: *
    [0x00, 0x18, 0x18, 0x7E, 0x18, 0x18, 0x00, 0x00], // 43: +
    [0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x30], // 44: ,
    [0x00, 0x00, 0x00, 0x7E, 0x00, 0x00, 0x00, 0x00], // 45: -
    [0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00], // 46: .
    [0x06, 0x0C, 0x18, 0x30, 0x60, 0xC0, 0x80, 0x00], // 47: /
    [0x7C, 0xCE, 0xDE, 0xF6, 0xE6, 0xC6, 0x7C, 0x00], // 48: 0
    [0x18, 0x38, 0x18, 0x18, 0x18, 0x18, 0x7E, 0x00], // 49: 1
    [0x7C, 0xC6, 0x06, 0x7C, 0xC0, 0xC0, 0xFE, 0x00], // 50: 2
    [0xFC, 0x06, 0x06, 0x3C, 0x06, 0x06, 0xFC, 0x00], // 51: 3
    [0x0C, 0xCC, 0xCC, 0xCC, 0xFE, 0x0C, 0x0C, 0x00], // 52: 4
    [0xFE, 0xC0, 0xFC, 0x06, 0x06, 0xC6, 0x7C, 0x00], // 53: 5
    [0x7C, 0xC0, 0xC0, 0xFC, 0xC6, 0xC6, 0x7C, 0x00], // 54: 6
    [0xFE, 0x06, 0x06, 0x0C, 0x18, 0x30, 0x30, 0x00], // 55: 7
    [0x7C, 0xC6, 0xC6, 0x7C, 0xC6, 0xC6, 0x7C, 0x00], // 56: 8
    [0x7C, 0xC6, 0xC6, 0x7E, 0x06, 0x06, 0x7C, 0x00], // 57: 9
    [0x00, 0x18, 0x18, 0x00, 0x00, 0x18, 0x18, 0x00], // 58: :
    [0x00, 0x18, 0x18, 0x00, 0x00, 0x18, 0x18, 0x30], // 59: ;
    [0x0C, 0x18, 0x30, 0x60, 0x30, 0x18, 0x0C, 0x00], // 60: <
    [0x00, 0x00, 0x7E, 0x00, 0x7E, 0x00, 0x00, 0x00], // 61: =
    [0x30, 0x18, 0x0C, 0x06, 0x0C, 0x18, 0x30, 0x00], // 62: >
    [0x7C, 0xC6, 0x0C, 0x18, 0x18, 0x00, 0x18, 0x00], // 63: ?
    [0x7C, 0xC6, 0xDE, 0xDE, 0xDC, 0xC0, 0x7E, 0x00], // 64: @
    [0x38, 0x6C, 0xC6, 0xC6, 0xFE, 0xC6, 0xC6, 0x00], // 65: A
    [0xFC, 0xC6, 0xC6, 0xFC, 0xC6, 0xC6, 0xFC, 0x00], // 66: B
    [0x7C, 0xC6, 0xC0, 0xC0, 0xC0, 0xC6, 0x7C, 0x00], // 67: C
    [0xF8, 0xCC, 0xC6, 0xC6, 0xC6, 0xCC, 0xF8, 0x00], // 68: D
    [0xFE, 0xC0, 0xC0, 0xFC, 0xC0, 0xC0, 0xFE, 0x00], // 69: E
    [0xFE, 0xC0, 0xC0, 0xFC, 0xC0, 0xC0, 0xC0, 0x00], // 70: F
    [0x7C, 0xC6, 0xC0, 0xCE, 0xC6, 0xC6, 0x7E, 0x00], // 71: G
    [0xC6, 0xC6, 0xC6, 0xFE, 0xC6, 0xC6, 0xC6, 0x00], // 72: H
    [0x7E, 0x18, 0x18, 0x18, 0x18, 0x18, 0x7E, 0x00], // 73: I
    [0x06, 0x06, 0x06, 0x06, 0xC6, 0xC6, 0x7C, 0x00], // 74: J
    [0xC6, 0xCC, 0xD8, 0xF0, 0xD8, 0xCC, 0xC6, 0x00], // 75: K
    [0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xFE, 0x00], // 76: L
    [0xC6, 0xEE, 0xFE, 0xD6, 0xC6, 0xC6, 0xC6, 0x00], // 77: M
    [0xC6, 0xE6, 0xF6, 0xDE, 0xCE, 0xC6, 0xC6, 0x00], // 78: N
    [0x7C, 0xC6, 0xC6, 0xC6, 0xC6, 0xC6, 0x7C, 0x00], // 79: O
    [0xFC, 0xC6, 0xC6, 0xFC, 0xC0, 0xC0, 0xC0, 0x00], // 80: P
    [0x7C, 0xC6, 0xC6, 0xC6, 0xD6, 0xDE, 0x7C, 0x06], // 81: Q
    [0xFC, 0xC6, 0xC6, 0xFC, 0xD8, 0xCC, 0xC6, 0x00], // 82: R
    [0x7C, 0xC6, 0xC0, 0x7C, 0x06, 0xC6, 0x7C, 0x00], // 83: S
    [0xFF, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00], // 84: T
    [0xC6, 0xC6, 0xC6, 0xC6, 0xC6, 0xC6, 0x7C, 0x00], // 85: U
    [0xC6, 0xC6, 0xC6, 0xC6, 0xC6, 0x6C, 0x38, 0x00], // 86: V
    [0xC6, 0xC6, 0xC6, 0xD6, 0xFE, 0xEE, 0xC6, 0x00], // 87: W
    [0xC6, 0xC6, 0x6C, 0x38, 0x6C, 0xC6, 0xC6, 0x00], // 88: X
    [0xC3, 0x66, 0x3C, 0x18, 0x18, 0x18, 0x18, 0x00], // 89: Y
    [0xFE, 0x06, 0x0C, 0x18, 0x30, 0x60, 0xFE, 0x00], // 90: Z
    [0x3C, 0x30, 0x30, 0x30, 0x30, 0x30, 0x3C, 0x00], // 91: [
    [0xC0, 0x60, 0x30, 0x18, 0x0C, 0x06, 0x02, 0x00], // 92: \
    [0x3C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x3C, 0x00], // 93: ]
    [0x10, 0x38, 0x6C, 0xC6, 0x00, 0x00, 0x00, 0x00], // 94: ^
    [0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF], // 95: _
    [0x30, 0x18, 0x0C, 0x00, 0x00, 0x00, 0x00, 0x00], // 96: `
    [0x00, 0x00, 0x7C, 0x06, 0x7E, 0xC6, 0x7E, 0x00], // 97: a
    [0xC0, 0xC0, 0xFC, 0xC6, 0xC6, 0xC6, 0xFC, 0x00], // 98: b
    [0x00, 0x00, 0x7C, 0xC6, 0xC0, 0xC6, 0x7C, 0x00], // 99: c
    [0x06, 0x06, 0x7E, 0xC6, 0xC6, 0xC6, 0x7E, 0x00], // 100: d
    [0x00, 0x00, 0x7C, 0xC6, 0xFE, 0xC0, 0x7C, 0x00], // 101: e
    [0x1C, 0x36, 0x30, 0x78, 0x30, 0x30, 0x30, 0x00], // 102: f
    [0x00, 0x00, 0x7E, 0xC6, 0xC6, 0x7E, 0x06, 0x7C], // 103: g
    [0xC0, 0xC0, 0xFC, 0xC6, 0xC6, 0xC6, 0xC6, 0x00], // 104: h
    [0x18, 0x00, 0x38, 0x18, 0x18, 0x18, 0x3C, 0x00], // 105: i
    [0x06, 0x00, 0x06, 0x06, 0x06, 0x06, 0xC6, 0x7C], // 106: j
    [0xC0, 0xC0, 0xCC, 0xD8, 0xF0, 0xD8, 0xCC, 0x00], // 107: k
    [0x38, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3C, 0x00], // 108: l
    [0x00, 0x00, 0xCC, 0xFE, 0xD6, 0xD6, 0xC6, 0x00], // 109: m
    [0x00, 0x00, 0xFC, 0xC6, 0xC6, 0xC6, 0xC6, 0x00], // 110: n
    [0x00, 0x00, 0x7C, 0xC6, 0xC6, 0xC6, 0x7C, 0x00], // 111: o
    [0x00, 0x00, 0xFC, 0xC6, 0xC6, 0xFC, 0xC0, 0xC0], // 112: p
    [0x00, 0x00, 0x7E, 0xC6, 0xC6, 0x7E, 0x06, 0x06], // 113: q
    [0x00, 0x00, 0xDC, 0xE6, 0xC0, 0xC0, 0xC0, 0x00], // 114: r
    [0x00, 0x00, 0x7E, 0xC0, 0x7C, 0x06, 0xFC, 0x00], // 115: s
    [0x30, 0x30, 0xFC, 0x30, 0x30, 0x36, 0x1C, 0x00], // 116: t
    [0x00, 0x00, 0xC6, 0xC6, 0xC6, 0xC6, 0x7E, 0x00], // 117: u
    [0x00, 0x00, 0xC6, 0xC6, 0xC6, 0x6C, 0x38, 0x00], // 118: v
    [0x00, 0x00, 0xC6, 0xD6, 0xFE, 0xFE, 0x6C, 0x00], // 119: w
    [0x00, 0x00, 0xC6, 0x6C, 0x38, 0x6C, 0xC6, 0x00], // 120: x
    [0x00, 0x00, 0xC6, 0xC6, 0xC6, 0x7E, 0x06, 0x7C], // 121: y
    [0x00, 0x00, 0xFE, 0x0C, 0x38, 0x60, 0xFE, 0x00], // 122: z
    [0x0E, 0x18, 0x18, 0x70, 0x18, 0x18, 0x0E, 0x00], // 123: {
    [0x18, 0x18, 0x18, 0x00, 0x18, 0x18, 0x18, 0x00], // 124: |
    [0x70, 0x18, 0x18, 0x0E, 0x18, 0x18, 0x70, 0x00], // 125: }
    [0x76, 0xDC, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], // 126: ~
];

/// Get glyph data for a character
#[inline]
pub fn get_glyph(ch: char) -> Option<&'static [u8; 8]> {
    if (' '..='~').contains(&ch) {
        let idx = (ch as u8 - 32) as usize;
        Some(&FONT_8X8[idx])
    } else {
        None
    }
}

/// Character width in pixels
pub const GLYPH_WIDTH: u32 = 8;

/// Character height in pixels  
pub const GLYPH_HEIGHT: u32 = 8;

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_font_data() {
        assert_eq!(FONT_8X8.len(), 95); // 32-126 = 95 chars
                                        // 'A' should have non-zero rows
        let a_glyph = get_glyph('A').unwrap();
        assert!(a_glyph.iter().any(|&b| b != 0));
    }

    #[test]
    fn test_get_glyph() {
        assert!(get_glyph(' ').is_some());
        assert!(get_glyph('A').is_some());
        assert!(get_glyph('~').is_some());
        assert!(get_glyph('\x00').is_none());
        assert!(get_glyph('â‚¬').is_none());
    }
}
